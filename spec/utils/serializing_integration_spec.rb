# -*- encoding : utf-8 -*-

require 'spec_helper'
require 'json'

describe 'Serializing/Deserializing' do
  let(:json) { "{\"name\":\"GÃ©nie de la construction\",\"slug\":\"hor_ctn\",\"courses\":[{\"name\":\"ANG010\",\"groups\":[{\"nb\":1,\"periods\":[{\"weekday\":{\"index\":0},\"type\":\"Cours\",\"start_time\":{\"hour\":18,\"minutes\":0},\"end_time\":{\"hour\":21,\"minutes\":30}},{\"weekday\":{\"index\":4},\"type\":\"TP\",\"start_time\":{\"hour\":18,\"minutes\":0},\"end_time\":{\"hour\":20,\"minutes\":0}}]}]},{\"name\":\"ATE050\",\"groups\":[{\"nb\":1,\"periods\":[{\"weekday\":{\"index\":1},\"type\":\"Atelier\",\"start_time\":{\"hour\":8,\"minutes\":30},\"end_time\":{\"hour\":10,\"minutes\":30}}]}]},{\"name\":\"ATE060\",\"groups\":[{\"nb\":1,\"periods\":[{\"weekday\":{\"index\":4},\"type\":\"Atelier\",\"start_time\":{\"hour\":9,\"minutes\":0},\"end_time\":{\"hour\":12,\"minutes\":0}}]}]},{\"name\":\"CHM131\",\"groups\":[{\"nb\":1,\"periods\":[{\"weekday\":{\"index\":2},\"type\":\"Cours\",\"start_time\":{\"hour\":13,\"minutes\":30},\"end_time\":{\"hour\":17,\"minutes\":0}},{\"weekday\":{\"index\":4},\"type\":\"TP\",\"start_time\":{\"hour\":9,\"minutes\":0},\"end_time\":{\"hour\":12,\"minutes\":0}}]},{\"nb\":2,\"periods\":[{\"weekday\":{\"index\":0},\"type\":\"Cours\",\"start_time\":{\"hour\":13,\"minutes\":30},\"end_time\":{\"hour\":17,\"minutes\":0}},{\"weekday\":{\"index\":3},\"type\":\"TP\",\"start_time\":{\"hour\":13,\"minutes\":30},\"end_time\":{\"hour\":16,\"minutes\":30}}]},{\"nb\":3,\"periods\":[{\"weekday\":{\"index\":2},\"type\":\"Cours\",\"start_time\":{\"hour\":9,\"minutes\":0},\"end_time\":{\"hour\":12,\"minutes\":30}},{\"weekday\":{\"index\":0},\"type\":\"TP\",\"start_time\":{\"hour\":9,\"minutes\":0},\"end_time\":{\"hour\":12,\"minutes\":0}}]},{\"nb\":4,\"periods\":[{\"weekday\":{\"index\":3},\"type\":\"Cours\",\"start_time\":{\"hour\":9,\"minutes\":0},\"end_time\":{\"hour\":12,\"minutes\":30}},{\"weekday\":{\"index\":1},\"type\":\"TP\",\"start_time\":{\"hour\":9,\"minutes\":0},\"end_time\":{\"hour\":12,\"minutes\":0}}]},{\"nb\":5,\"periods\":[{\"weekday\":{\"index\":1},\"type\":\"Cours\",\"start_time\":{\"hour\":13,\"minutes\":30},\"end_time\":{\"hour\":17,\"minutes\":0}},{\"weekday\":{\"index\":4},\"type\":\"TP\",\"start_time\":{\"hour\":13,\"minutes\":30},\"end_time\":{\"hour\":16,\"minutes\":30}}]},{\"nb\":6,\"periods\":[{\"weekday\":{\"index\":3},\"type\":\"Cours\",\"start_time\":{\"hour\":13,\"minutes\":30},\"end_time\":{\"hour\":17,\"minutes\":0}},{\"weekday\":{\"index\":0},\"type\":\"TP\",\"start_time\":{\"hour\":13,\"minutes\":30},\"end_time\":{\"hour\":16,\"minutes\":30}}]},{\"nb\":7,\"periods\":[{\"weekday\":{\"index\":2},\"type\":\"Cours\",\"start_time\":{\"hour\":18,\"minutes\":0},\"end_time\":{\"hour\":21,\"minutes\":30}},{\"weekday\":{\"index\":0},\"type\":\"TP\",\"start_time\":{\"hour\":18,\"minutes\":0},\"end_time\":{\"hour\":21,\"minutes\":0}}]},{\"nb\":8,\"periods\":[{\"weekday\":{\"index\":3},\"type\":\"Cours\",\"start_time\":{\"hour\":18,\"minutes\":0},\"end_time\":{\"hour\":21,\"minutes\":30}},{\"weekday\":{\"index\":1},\"type\":\"TP\",\"start_time\":{\"hour\":18,\"minutes\":0},\"end_time\":{\"hour\":21,\"minutes\":0}}]},{\"nb\":9,\"periods\":[{\"weekday\":{\"index\":4},\"type\":\"Cours\",\"start_time\":{\"hour\":9,\"minutes\":0},\"end_time\":{\"hour\":12,\"minutes\":30}},{\"weekday\":{\"index\":2},\"type\":\"TP\",\"start_time\":{\"hour\":13,\"minutes\":30},\"end_time\":{\"hour\":16,\"minutes\":30}}]},{\"nb\":10,\"periods\":[{\"weekday\":{\"index\":1},\"type\":\"Cours\",\"start_time\":{\"hour\":9,\"minutes\":0},\"end_time\":{\"hour\":12,\"minutes\":30}},{\"weekday\":{\"index\":3},\"type\":\"TP\",\"start_time\":{\"hour\":9,\"minutes\":0},\"end_time\":{\"hour\":12,\"minutes\":0}}]}]},{\"name\":\"COM110\",\"groups\":[{\"nb\":1,\"periods\":[{\"weekday\":{\"index\":3},\"type\":\"Cours\",\"start_time\":{\"hour\":13,\"minutes\":30},\"end_time\":{\"hour\":17,\"minutes\":0}},{\"weekday\":{\"index\":0},\"type\":\"TP A+B\",\"start_time\":{\"hour\":13,\"minutes\":30},\"end_time\":{\"hour\":17,\"minutes\":30}}]},{\"nb\":2,\"periods\":[{\"weekday\":{\"index\":4},\"type\":\"Cours\",\"start_time\":{\"hour\":9,\"minutes\":0},\"end_time\":{\"hour\":12,\"minutes\":30}},{\"weekday\":{\"index\":2},\"type\":\"TP A+B\",\"start_time\":{\"hour\":13,\"minutes\":30},\"end_time\":{\"hour\":17,\"minutes\":30}}]},{\"nb\":3,\"periods\":[{\"weekday\":{\"index\":1},\"type\":\"Cours\",\"start_time\":{\"hour\":9,\"minutes\":0},\"end_time\":{\"hour\":12,\"minutes\":30}},{\"weekday\":{\"index\":3},\"type\":\"TP A+B\",\"start_time\":{\"hour\":8,\"minutes\":30},\"end_time\":{\"hour\":12,\"minutes\":30}}]},{\"nb\":4,\"periods\":[{\"weekday\":{\"index\":3},\"type\":\"Cours\",\"start_time\":{\"hour\":9,\"minutes\":0},\"end_time\":{\"hour\":12,\"minutes\":30}},{\"weekday\":{\"index\":1},\"type\":\"TP A+B\",\"start_time\":{\"hour\":8,\"minutes\":30},\"end_time\":{\"hour\":12,\"minutes\":30}}]},{\"nb\":5,\"periods\":[{\"weekday\":{\"index\":2},\"type\":\"Cours\",\"start_time\":{\"hour\":13,\"minutes\":30},\"end_time\":{\"hour\":17,\"minutes\":0}},{\"weekday\":{\"index\":4},\"type\":\"TP A+B\",\"start_time\":{\"hour\":8,\"minutes\":30},\"end_time\":{\"hour\":12,\"minutes\":30}}]},{\"nb\":6,\"periods\":[{\"weekday\":{\"index\":0},\"type\":\"Cours\",\"start_time\":{\"hour\":9,\"minutes\":0},\"end_time\":{\"hour\":12,\"minutes\":30}},{\"weekday\":{\"index\":2},\"type\":\"TP A+B\",\"start_time\":{\"hour\":8,\"minutes\":30},\"end_time\":{\"hour\":12,\"minutes\":30}}]},{\"nb\":7,\"periods\":[{\"weekday\":{\"index\":0},\"type\":\"Cours\",\"start_time\":{\"hour\":13,\"minutes\":30},\"end_time\":{\"hour\":17,\"minutes\":0}},{\"weekday\":{\"index\":3},\"type\":\"TP A+B\",\"start_time\":{\"hour\":13,\"minutes\":30},\"end_time\":{\"hour\":17,\"minutes\":30}}]},{\"nb\":8,\"periods\":[{\"weekday\":{\"index\":2},\"type\":\"Cours\",\"start_time\":{\"hour\":18,\"minutes\":0},\"end_time\":{\"hour\":21,\"minutes\":30}},{\"weekday\":{\"index\":4},\"type\":\"TP A+B\",\"start_time\":{\"hour\":18,\"minutes\":0},\"end_time\":{\"hour\":22,\"minutes\":0}}]},{\"nb\":9,\"periods\":[{\"weekday\":{\"index\":2},\"type\":\"Cours\",\"start_time\":{\"hour\":9,\"minutes\":0},\"end_time\":{\"hour\":12,\"minutes\":30}},{\"weekday\":{\"index\":0},\"type\":\"TP A+B\",\"start_time\":{\"hour\":8,\"minutes\":30},\"end_time\":{\"hour\":12,\"minutes\":30}}]},{\"nb\":10,\"periods\":[{\"weekday\":{\"index\":0},\"type\":\"Cours\",\"start_time\":{\"hour\":18,\"minutes\":0},\"end_time\":{\"hour\":21,\"minutes\":30}},{\"weekday\":{\"index\":4},\"type\":\"TP A+B\",\"start_time\":{\"hour\":18,\"minutes\":0},\"end_time\":{\"hour\":22,\"minutes\":0}}]},{\"nb\":11,\"periods\":[{\"weekday\":{\"index\":1},\"type\":\"Cours\",\"start_time\":{\"hour\":18,\"minutes\":0},\"end_time\":{\"hour\":21,\"minutes\":30}},{\"weekday\":{\"index\":3},\"type\":\"TP A+B\",\"start_time\":{\"hour\":18,\"minutes\":0},\"end_time\":{\"hour\":22,\"minutes\":0}}]},{\"nb\":12,\"periods\":[{\"weekday\":{\"index\":3},\"type\":\"Cours\",\"start_time\":{\"hour\":9,\"minutes\":0},\"end_time\":{\"hour\":12,\"minutes\":30}},{\"weekday\":{\"index\":1},\"type\":\"TP A+B\",\"start_time\":{\"hour\":8,\"minutes\":30},\"end_time\":{\"hour\":12,\"minutes\":30}}]},{\"nb\":13,\"periods\":[{\"weekday\":{\"index\":2},\"type\":\"Cours\",\"start_time\":{\"hour\":9,\"minutes\":0},\"end_time\":{\"hour\":12,\"minutes\":30}},{\"weekday\":{\"index\":0},\"type\":\"TP A+B\",\"start_time\":{\"hour\":8,\"minutes\":30},\"end_time\":{\"hour\":12,\"minutes\":30}}]}]}]}" }
  let(:hash) { JSON.parse(json) }

  specify do
    expect(Bachelor.deserialize(hash).serialize.to_json).to eq(json)
  end
end